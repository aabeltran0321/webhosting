<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>Manuforecast</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" type="text/css" href="/static/css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="/static/css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="/static/images/fevicon.png" type="image/gif" />
      <!-- Scrollbar Custom CSS -->
      <link rel="stylesheet" href="/static/css/jquery.mCustomScrollbar.min.css">
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
      <!-- fonts -->
      <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
      <!-- owl stylesheets -->
      <link href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css" rel="stylesheet" />
      <!-- For Three months Advance-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
      <!-- For Backtrack-->
      <script>
         window.onload = function () {
         
         var limit = 50000;
         var y = 100;    
         var data = [];
         var dataSeries = { type: "line" };
         var dataPoints = [];
         for (var i = 0; i < limit; i += 1) {
            y += Math.round(Math.random() * 10 - 5);
            dataPoints.push({
               x: i,
               y: y
            });
         }
         dataSeries.dataPoints = dataPoints;
         data.push(dataSeries);
         
         //Better to construct options first and then pass it as a parameter
         var options = {
            zoomEnabled: true,
            animationEnabled: true,
            title: {
               text: ""
            },
            axisY: {
               lineThickness: 1
            },
            data: data  // random data
         };
         
         var chart = new CanvasJS.Chart("chartContainer", options);
         var startTime = new Date();
         chart.render();
         var endTime = new Date();
         document.getElementById("timeToRender").innerHTML = "Time to Render: " + (endTime - startTime) + "ms";
         
         }
         </script>
      <!--End of backtrack-->
      <!--For Level of Confidence-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
      <!--For Level of Confidence-->
   </head>
   <body>
      <!-- header section start -->
      <div class="header_section">
         <div class="container-fluid">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
               <a class="logo" href="#"><img src="/static/images/logo.png"></a>
               <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
               </button>
               <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <div class = "but">
                  <ul class="navbar-nav mr-auto">
                     <li class="nav-item active">
                        <a class="nav-link" href="/index">Home</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="/forecast">Forecasting</a>
                     </li>
                     <li class="nav-item">
                        <a class="nav-link" href="/contact">Contact Us</a>
                     </li>
                  </ul>
               </div>
               </div>
            </nav>
         </div>
      </div>
      <!-- header section end -->
      <!-- banner section start -->
      <div class="banner_section banner_bg" style="padding-bottom: 0px;">
         <div class="container-fluid">
            <div>
               <div class="carousel-inner">
                  <div class="carousel-item active">
                     <div class="taital_main">
                        <div class="taital_left">
                           <h1 class="banner_taital_2">{{sector_name_upper}} AVERAGE CAPACITY UTILIZATION RATE</h1>
                        </div>
                        <div class="taital_right">
                           <div class="product_img_1"><img src="/static/images/product-img.png"></div>
                        </div>
                        
                     </div>
                     
                  </div>
                  
                  
               </div>
               
            </div>
         </div>
      </div>
      <!-- banner section end -->
      <!-- about promotional start -->
      <div class="about_section layout_padding" style=" padding-top: 0;">
         <div style="width: 100%;">
            <h1 class="about_taital">Results for {{current_month}}</h1><br>        
         </div>
         <center>
         <div class="iframe-container2">
            <div class = "current_div">
               <h1 class="current_taital">Current Rate</h1><br>
               <h1 class="current_taital1">{{present_rate}}%</h1>
            </div>
            <div class = "fore_div">
               <h1 class="current_taital">Forecasted Rate</h1><br>
               <h1 class="current_taital1">{{forecast_rate}}%</h1>
            </div>
            
            <div class = "current_div1">
               <h1 class="current_taital">Difference</h1><br>
               <h1 class="current_taital1">{{difference}}</h1>
            </div>
            <div class = "fore_div1">
               <h1 class="current_taital">Probability</h1><br>
               <h1 class="current_taital1">{{probability}}%</h1>
            </div>
         </div> 
         </center>
      </div>
      <script src="" class="handlers">{{dates_to_plot}}</script>
      <!-- about section end -->

   
      <!-- level of confidence start -->
      <div class="about_section layout_padding" style=" padding-top: 0;">
         <div style="width: 100%;">
            <h1 class="about_taital">LEVEL OF CONFIDENCE OF THE PAST AND FORECAST DATA</h1><br>        
         </div>
         <center>
         <div class="iframe-container2">
            <div style="width: 80%;">
               <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
               <canvas id="myChart1" style="width:100%;"></canvas>
               <form action="/sectors2/" method="post" class="formRes" id = "formRes">
                  {% csrf_token %}
                  <input type="hidden" id="labelID" name="labelID" value="">
                  <input type="hidden" id="dataID" name="dataID" value="">
                  <input type="hidden" id="prevlabelID" name="prevlabelID" value="">
                  <input type="hidden" id="prevdataID" name="prevdataID" value="">
                  <input type="hidden" id="nextlabelID" name="nextlabelID" value="">
                  <input type="hidden" id="nextdataID" name="nextdataID" value="">
                  
                  <input type="hidden" id="sectorName" name="sectorName" value="{{sector_name_upper}}">
               </form>

               <script>
               var xValues = [];

               chart1 = new Chart("myChart1", {
               type: "line",
               data: {
                  labels: {{label_data|safe}},
                  datasets: [{ 
                     data: {{orig_data|safe}},
                     borderColor: "#202d36",
                     fill: false
                  }, { 
                     data: {{comp_data|safe}},
                     borderColor: "#74c6ff",
                     fill: false
                  }]
               },
               options: {
                  plugins: { legend: { display: false, }, },
                  scales:{
                  x: {
                     display: false
                  }
                  },
                  onClick: (event, elements, chart) => {
                     if (elements[0]) {            
                        const i = elements[0].index;
                        //alert(chart.data.labels[i] + ': ' + chart.data.datasets[0].data[i]);
                        //alert(i)
                        if((i-1)>0 && chart.data.datasets[0].data[i+1]!=undefined){
                           document.getElementById('labelID').value= chart.data.labels[i];
                           document.getElementById('dataID').value= chart.data.datasets[0].data[i];
                           document.getElementById('prevlabelID').value= chart.data.labels[i-1];
                           document.getElementById('prevdataID').value= chart.data.datasets[0].data[i+1];
                           document.getElementById('nextlabelID').value= chart.data.labels[i+1];
                           document.getElementById('nextdataID').value= chart.data.datasets[1].data[i];
                           document.getElementById("formRes").submit();
                        }
                        else{
                           alert("data limit!")
                        }
                        
                     }
                     
                  } 
               }
               });
               
               </script>

            </div>
         </div> 
         </center>
      </div>
      <!-- level of confidence end -->
     
      <!-- copyright section start -->
      <div class="copyright_section">
         <div class="container">
            <p class="copyright_text">© 2020 All Rights Reserved. Manuforecast</p>
         </div>
      </div>
      <!-- copyright section end  -->
      <!-- Javascript files-->
      <script src="/static/js/jquery.min.js"></script>
      <script src="/static/js/popper.min.js"></script>
      <script src="/static/js/bootstrap.bundle.min.js"></script>
      <script src="/static/js/jquery-3.0.0.min.js"></script>
      <script src="/static/js/plugin.js"></script>
      <!-- sidebar -->
      <script src="/static/js/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="/static/js/custom.js"></script>
      <!-- javascript --> 
      <script src="/static/js/owl.carousel.js"></script>
      <!-- owl carousel -->
      <script>
         $('.owl-carousel').owlCarousel({
         loop:true,
         margin:30,
         nav:true,
         responsive:{
          0:{
              items:1
          },
          600:{
              items:3
          },
          1000:{
              items:4
          }
         }
         })
      </script>
   </body>
</html>